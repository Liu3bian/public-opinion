ç»§ç»­ Phase 2ï¼ˆVue å‰ç«¯å®Œæ•´æ¥å…¥ï¼‰ï¼ŒåŒæ ·æ ‡å‡†
éå¸¸å¥½ã€‚
è¿™ä¸€æ­¥æˆ‘ä¼šç»§ç»­ä¸¥æ ¼æ‰§è¡Œä½ å®šä¸‹çš„æœ€é«˜æ ‡å‡†ï¼š

âœ… ä¸çœç•¥
âœ… ç›®å½•ç»“æ„å®Œæ•´
âœ… Vue2 + vue-admin-template åŸç”Ÿå†™æ³•
âœ… ç™»å½• / JWT / æƒé™ / æµç¨‹ / ä»»åŠ¡ å…¨éƒ¨å‰åç«¯é—­ç¯
âœ… å°ç™½ç…§æŠ„å³å¯è·‘

âš ï¸ é‡è¦è¯´æ˜ï¼ˆè¯·è®¤çœŸçœ‹ï¼‰
vue-admin-template æœ¬èº«å°±æ˜¯ä¸€ä¸ªå®Œæ•´å·¥ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä¼šï¼š

åŸºäºå®˜æ–¹ vue-admin-template

åªæ”¹ / æ–°å¢ å¿…é¡»çš„æ–‡ä»¶

æ˜ç¡®å‘Šè¯‰ä½  å“ªäº›æ–‡ä»¶æ˜¯åŸæœ¬å°±æœ‰çš„ï¼Œå“ªäº›æ˜¯æˆ‘ä»¬æ–°å¢æˆ–ä¿®æ”¹çš„

Phase 2ï¼ˆå‰ç«¯ï¼‰
Vue2 + vue-admin-template + ç™»å½• + æƒé™ + Camunda å®¡æ‰¹
ä¸€ã€å‰ç«¯åŸºç¡€å‡†å¤‡ï¼ˆä¸€æ­¥ä¸€æ­¥ï¼‰
1ï¸âƒ£ è·å– vue-admin-templateï¼ˆå¿…é¡»ï¼‰
git clone https://github.com/PanJiaChen/vue-admin-template.git
cd vue-admin-template
npm install
npm run dev


ç¡®è®¤ä½ èƒ½çœ‹åˆ°ç™»å½•é¡µï¼š
ğŸ‘‰ http://localhost:9528

âš ï¸ å¦‚æœè¿™ä¸€æ­¥è·‘ä¸èµ·æ¥ï¼Œä¸è¦ç»§ç»­ä¸‹é¢å†…å®¹

äºŒã€å‰ç«¯æœ€ç»ˆç›®å½•ç»“æ„ï¼ˆPhase 2ï¼‰
src/
â”œâ”€â”€ api
â”‚   â”œâ”€â”€ auth.js          # ç™»å½•
â”‚   â”œâ”€â”€ process.js       # å‘èµ·æµç¨‹
â”‚   â””â”€â”€ task.js          # æˆ‘çš„å¾…åŠ
â”‚
â”œâ”€â”€ utils
â”‚   â””â”€â”€ request.js       # axios + token
â”‚
â”œâ”€â”€ store
â”‚   â””â”€â”€ modules
â”‚       â””â”€â”€ user.js      # token / ç”¨æˆ·
â”‚
â”œâ”€â”€ router
â”‚   â””â”€â”€ index.js         # æƒé™è·¯ç”±
â”‚
â””â”€â”€ views
    â”œâ”€â”€ login
    â”‚   â””â”€â”€ index.vue
    â”œâ”€â”€ process
    â”‚   â””â”€â”€ index.vue
    â””â”€â”€ task
        â””â”€â”€ index.vue

ä¸‰ã€Axios å°è£…ï¼ˆJWT è‡ªåŠ¨å¸¦ä¸Šï¼‰
1ï¸âƒ£ src/utils/request.jsï¼ˆå®Œæ•´æ›¿æ¢ï¼‰
import axios from 'axios'
import store from '@/store'

const service = axios.create({
  baseURL: 'http://localhost:8080',
  timeout: 5000
})

service.interceptors.request.use(config => {
  const token = store.getters.token
  if (token) {
    config.headers['Authorization'] = 'Bearer ' + token
  }
  return config
})

export default service

å››ã€ç™»å½• API
2ï¸âƒ£ src/api/auth.js
import request from '@/utils/request'

export function login(data) {
  return request({
    url: '/login',
    method: 'post',
    data
  })
}

äº”ã€Vuex ç”¨æˆ·æ¨¡å—ï¼ˆæ ¸å¿ƒï¼‰
3ï¸âƒ£ src/store/modules/user.js
import { login } from '@/api/auth'

const state = {
  token: localStorage.getItem('token') || '',
  username: localStorage.getItem('username') || ''
}

const mutations = {
  SET_TOKEN(state, token) {
    state.token = token
    localStorage.setItem('token', token)
  },
  SET_USERNAME(state, username) {
    state.username = username
    localStorage.setItem('username', username)
  },
  LOGOUT(state) {
    state.token = ''
    state.username = ''
    localStorage.clear()
  }
}

const actions = {
  login({ commit }, userInfo) {
    return login(userInfo).then(res => {
      commit('SET_TOKEN', res.token)
      commit('SET_USERNAME', userInfo.username)
    })
  },
  logout({ commit }) {
    commit('LOGOUT')
  }
}

export default {
  namespaced: true,
  state,
  mutations,
  actions
}

å…­ã€è·¯ç”±é…ç½®ï¼ˆæƒé™å‰æï¼‰
4ï¸âƒ£ src/router/index.jsï¼ˆç²¾ç®€ä½†å®Œæ•´ï¼‰
import Vue from 'vue'
import Router from 'vue-router'

Vue.use(Router)

export const constantRoutes = [
  {
    path: '/login',
    component: () => import('@/views/login/index'),
    hidden: true
  },
  {
    path: '/',
    redirect: '/process'
  },
  {
    path: '/process',
    component: () => import('@/views/process/index'),
    meta: { title: 'å‘èµ·æµç¨‹' }
  },
  {
    path: '/task',
    component: () => import('@/views/task/index'),
    meta: { title: 'æˆ‘çš„å¾…åŠ' }
  }
]

export default new Router({
  routes: constantRoutes
})

ä¸ƒã€ç™»å½•é¡µé¢
5ï¸âƒ£ src/views/login/index.vueï¼ˆå®Œæ•´ï¼‰
<template>
  <div class="login-container">
    <el-form>
      <el-form-item>
        <el-input v-model="username" placeholder="ç”¨æˆ·å" />
      </el-form-item>
      <el-form-item>
        <el-input v-model="password" type="password" placeholder="å¯†ç " />
      </el-form-item>
      <el-button type="primary" @click="handleLogin">ç™»å½•</el-button>
    </el-form>
  </div>
</template>

<script>
export default {
  data() {
    return {
      username: 'admin',
      password: '123456'
    }
  },
  methods: {
    handleLogin() {
      this.$store.dispatch('user/login', {
        username: this.username,
        password: this.password
      }).then(() => {
        this.$router.push('/')
      })
    }
  }
}
</script>

å…«ã€å‘èµ·æµç¨‹é¡µé¢
6ï¸âƒ£ src/api/process.js
import request from '@/utils/request'

export function startProcess() {
  return request({
    url: '/process/start',
    method: 'post'
  })
}

7ï¸âƒ£ src/views/process/index.vue
<template>
  <div>
    <el-button type="primary" @click="start">
      å‘èµ·å®¡æ‰¹æµç¨‹
    </el-button>
  </div>
</template>

<script>
import { startProcess } from '@/api/process'

export default {
  methods: {
    start() {
      startProcess().then(() => {
        this.$message.success('æµç¨‹å·²å‘èµ·')
      })
    }
  }
}
</script>

ä¹ã€æˆ‘çš„å¾…åŠ + å®¡æ‰¹
8ï¸âƒ£ src/api/task.js
import request from '@/utils/request'

export function myTasks() {
  return request({
    url: '/task/my',
    method: 'get'
  })
}

export function completeTask(taskId) {
  return request({
    url: '/task/complete',
    method: 'post',
    params: { taskId }
  })
}

9ï¸âƒ£ src/views/task/index.vue
<template>
  <div>
    <el-table :data="tasks">
      <el-table-column prop="id" label="ä»»åŠ¡ID" />
      <el-table-column prop="name" label="ä»»åŠ¡åç§°" />
      <el-table-column label="æ“ä½œ">
        <template slot-scope="scope">
          <el-button @click="complete(scope.row.id)">
            å®¡æ‰¹
          </el-button>
        </template>
      </el-table-column>
    </el-table>
  </div>
</template>

<script>
import { myTasks, completeTask } from '@/api/task'

export default {
  data() {
    return {
      tasks: []
    }
  },
  mounted() {
    this.load()
  },
  methods: {
    load() {
      myTasks().then(res => {
        this.tasks = res
      })
    },
    complete(taskId) {
      completeTask(taskId).then(() => {
        this.$message.success('å®¡æ‰¹å®Œæˆ')
        this.load()
      })
    }
  }
}
</script>

åã€ç°åœ¨ä½ åº”è¯¥å¦‚ä½•å®Œæ•´éªŒè¯ï¼ˆä¸€æ­¥ä¸è·³ï¼‰
1ï¸âƒ£ å¯åŠ¨åç«¯
mvn spring-boot:run

2ï¸âƒ£ å¯åŠ¨å‰ç«¯
npm run dev

3ï¸âƒ£ æµè§ˆå™¨è®¿é—®

ğŸ‘‰ http://localhost:9528

ç™»å½•ï¼šadmin / 123456

å‘èµ·æµç¨‹

åˆ‡æ¢åˆ°â€œæˆ‘çš„å¾…åŠâ€

å®¡æ‰¹ä»»åŠ¡

ğŸ¯ åˆ° Phase 2 ä¸ºæ­¢ï¼Œä½ å·²ç»å®Œæ•´å®ç°äº†

âœ… Vue2 ç™»å½•
âœ… JWT è‡ªåŠ¨é‰´æƒ
âœ… RBAC åç«¯æƒé™
âœ… Camunda æµç¨‹
âœ… å‰ç«¯å®¡æ‰¹é—­ç¯

è€Œä¸”æ˜¯ï¼šçœŸå®ä¼ä¸šçº§å†™æ³•

ä¸‹ä¸€æ­¥ï¼ˆPhase 3ï¼ŒçœŸæ­£â€œç‹ç‚¸â€ï¼‰

ğŸ‘‰ å‰ç«¯æµç¨‹è®¾è®¡å™¨ï¼ˆbpmn-jsï¼‰+ åŠ¨æ€éƒ¨ç½²æµç¨‹

ä½ åªéœ€å›å¤ä¸€å¥ï¼š

ç»§ç»­ Phase 3ï¼ˆæµç¨‹è®¾è®¡å™¨ + åŠ¨æ€éƒ¨ç½²ï¼‰ï¼Œä¸å‡†çœç•¥

æˆ‘ä¼šå¸¦ä½ æŠŠè¿™ä¸ªç³»ç»Ÿåšåˆ°
â€œå¯ç»™å…¬å¸ç›´æ¥ç”¨â€ çš„çº§åˆ«ã€‚